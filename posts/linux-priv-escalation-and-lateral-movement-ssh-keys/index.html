<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Linux Priv Escalation and Lateral Movement With SSH Keys" /><meta property="og:locale" content="en" /><meta name="description" content="I void warranties" /><meta property="og:description" content="I void warranties" /><link rel="canonical" href="http://theevilsaint.github.io/posts/linux-priv-escalation-and-lateral-movement-ssh-keys/" /><meta property="og:url" content="http://theevilsaint.github.io/posts/linux-priv-escalation-and-lateral-movement-ssh-keys/" /><meta property="og:site_name" content="EvilSaint" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-25T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Linux Priv Escalation and Lateral Movement With SSH Keys" /><meta name="twitter:site" content="@_evilsaint_" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-04-25T00:00:00+01:00","datePublished":"2021-04-25T00:00:00+01:00","description":"I void warranties","headline":"Linux Priv Escalation and Lateral Movement With SSH Keys","mainEntityOfPage":{"@type":"WebPage","@id":"http://theevilsaint.github.io/posts/linux-priv-escalation-and-lateral-movement-ssh-keys/"},"url":"http://theevilsaint.github.io/posts/linux-priv-escalation-and-lateral-movement-ssh-keys/"}</script><title>Linux Priv Escalation and Lateral Movement With SSH Keys | EvilSaint</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="EvilSaint"><meta name="application-name" content="EvilSaint"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://evilsaint.com/static/images/evilsaint_shield_logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">EvilSaint</a></div><div class="site-subtitle font-italic">I void warranties</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://twitter.com/_evilsaint_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://evilsaint.com/subscribe" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://github.com/TheEvilSaint" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.instagram.com/therealevilsaint/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href="https://www.facebook.com/TheEvilSaint/" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Linux Priv Escalation and Lateral Movement With SSH Keys</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Linux Priv Escalation and Lateral Movement With SSH Keys</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1619305200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 25, 2021 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.twitter.com/_evilsaint_/">evilsaint</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2730 words"> <em>15 min</em> read</span></div></div></div><div class="post-content"><ul><li>This article will be split up into two parts. In the first part we will look at the SSH service, its native files and commands and good practices around using it.<li>The second part we will look at abusing many configurations.<li>For the examples in this article, I am going to boot up two Debian servers on Vultr.</ul><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/02dbb41a-7a5c-450a-a3a2-b008eb0a6e7f.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Both Servers are version Debian 10 x64 (aka buster)</p><ul><li>I have named the hostname of the two server demo1 and demo2 to make it easy to discern between them<li>When I first log in it asks if I want to accept the fingerprint which in this case is: “ECDSA key fingerprint is SHA256:du2f5e/Zux+XxuWWS/XdAc0ypC1OeAv5tGWUhWnaCSk”.<li>Make a mental note of that as we will be coming back to that later on in this article.<li>As this article is going to be on SSH keys I am going to start by generating a pair.</ul><h2 id="generating-an-ssh-keypair"><span class="mr-2">Generating an SSH Keypair</span><a href="#generating-an-ssh-keypair" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This is not an article on server setup so I am not going to go into great detail.</p><p>I am going to run the following command</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> RSA <span class="nt">-b</span> 4096
</pre></table></code></div></div><blockquote><p>The <code class="language-shell highlighter-rouge"><span class="nt">-t</span></code> specifies the type and the <code class="language-shell highlighter-rouge"><span class="nt">-b</span></code> the number of bits of entropy.</p></blockquote><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/2f088f7e-c9cf-4302-9d0e-4ebec9b3ac1b.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><blockquote><p>Notice the fingerprint SHA256:ALLUbdUShgY5OJztlLokHF7cv8o1vooMPwJCvNti3z8</p></blockquote><h2 id="looking-at-the-ssh-dameon-configuration"><span class="mr-2">Looking at the SSH Dameon configuration</span><a href="#looking-at-the-ssh-dameon-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Let us open the configuration</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nano /etc/ssh/sshd_config
</pre></table></code></div></div><p>Let us specifically look at the options that are commented out!</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cat</span> /etc/ssh/sshd_config  | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s2">"^#"</span>
</pre></table></code></div></div><p>The following were the default options found on this newly booted Vultr Debian server:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
</pre><td class="rouge-code"><pre>/#       <span class="nv">$OpenBSD</span>: sshd_config,v 1.103 2018/04/09 20:41:22 tj Exp <span class="err">$</span>
/# This is the sshd server system-wide configuration file.  See
/# sshd_config<span class="o">(</span>5<span class="o">)</span> <span class="k">for </span>more information.
/# This sshd was compiled with <span class="nv">PATH</span><span class="o">=</span>/usr/bin:/bin:/usr/sbin:/sbin
/# The strategy used <span class="k">for </span>options <span class="k">in </span>the default sshd_config shipped with
/# OpenSSH is to specify options with their default value where
/# possible, but leave them commented.  Uncommented options override the
/# default value.
/# Port 22
/# AddressFamily any
/# ListenAddress 0.0.0.0
/# ListenAddress ::
/# HostKey /etc/ssh/ssh_host_rsa_key
/# HostKey /etc/ssh/ssh_host_ecdsa_key
/# HostKey /etc/ssh/ssh_host_ed25519_key
/# Ciphers and keying
/# RekeyLimit default none
/# Logging
/# SyslogFacility AUTH
/# LogLevel INFO
/#  Authentication:
/# LoginGraceTime 2m
/# StrictModes <span class="nb">yes</span>
/# MaxAuthTries 6
/# MaxSessions 10
/# PubkeyAuthentication <span class="nb">yes</span>
/# Expect .ssh/authorized_keys2 to be disregarded by default <span class="k">in </span>future.
/# AuthorizedKeysFile     .ssh/authorized_keys .ssh/authorized_keys2
/# AuthorizedPrincipalsFile none
/# AuthorizedKeysCommand none
/# AuthorizedKeysCommandUser nobody
/# For this to work you will also need host keys <span class="k">in</span> /etc/ssh/ssh_known_hosts
/# HostbasedAuthentication no
/# Change to <span class="nb">yes </span><span class="k">if </span>you don<span class="s1">'t trust ~/.ssh/known_hosts for
/# HostbasedAuthentication
/# IgnoreUserKnownHosts no
/# Don'</span>t <span class="nb">read </span>the user<span class="s1">'s ~/.rhosts and ~/.shosts files
/# IgnoreRhosts yes
/#  To disable tunneled clear text passwords, change to no here!
/# PasswordAuthentication yes
/# PermitEmptyPasswords no
/# Change to yes to enable challenge-response passwords (beware issues with
/# some PAM modules and threads)
/# Kerberos options
/# KerberosAuthentication no
/# KerberosOrLocalPasswd yes
/# KerberosTicketCleanup yes
/# KerberosGetAFSToken no
/# GSSAPI options
/# GSSAPIAuthentication no
/# GSSAPICleanupCredentials yes
/# GSSAPIStrictAcceptorCheck yes
/# GSSAPIKeyExchange no
/# Set this to '</span><span class="nb">yes</span><span class="s1">' to enable PAM authentication, account processing,
/# and session processing. If this is enabled, PAM authentication will
/# be allowed through the ChallengeResponseAuthentication and
/# PasswordAuthentication.  Depending on your PAM configuration,
/# PAM authentication via ChallengeResponseAuthentication may bypass
/# the setting of "PermitRootLogin without-password".
/# If you just want the PAM account and session checks to run without
/# PAM authentication, then enable this but set PasswordAuthentication
/# and ChallengeResponseAuthentication to '</span>no<span class="s1">'.
/# AllowAgentForwarding yes
/# AllowTcpForwarding yes
/# GatewayPorts no
/# X11DisplayOffset 10
/# X11UseLocalhost yes
/# PermitTTY yes
/# PrintLastLog yes
/# TCPKeepAlive yes
/# PermitUserEnvironment no
/# Compression delayed
/# ClientAliveInterval 0
/# ClientAliveCountMax 3
/# UseDNS no
/# PidFile /var/run/sshd.pid
/# MaxStartups 10:30:100
/# PermitTunnel no
/# ChrootDirectory none
/# VersionAddendum none
/# no default banner path
/# Banner none
/# Allow client to pass locale environment variables
/# override default of no subsystems
/# Example of overriding settings on a per-user basis
/#Match User anoncvs
/#       X11Forwarding no
/#       AllowTcpForwarding no
/#      PermitTTY no
/#       ForceCommand cvs server
</span></pre></table></code></div></div><p>If it is not clear to anyone reading this! the lines starting with the <code class="language-shell highlighter-rouge"><span class="c">#</span></code> have been commented out.</p><p>Let us have a look at the keys we just generated</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/f3a65f26-d0a9-4688-99cd-5823f09a3b93.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>the <code class="language-shell highlighter-rouge">~</code> is the shortcut symbol to the users home directory. We follow this with a <code class="language-shell highlighter-rouge">.</code> and then the name of the SSH folder (note lowercase).</p><blockquote><p>The SSH folder starts with a <code class="language-shell highlighter-rouge">.</code> as it is a hidden folder.</p></blockquote><p>Looking at the screenshot we can see by just accepting defaults and pressing through the <code class="language-shell highlighter-rouge">ssh-keygen</code> command we have a public and private key in their default place (the users directory) and they have the appropriate permissions set.</p><p>Now for the next part of this article we are going to want the exact same key pair on the <code class="language-shell highlighter-rouge">demo2</code> machine.</p><p>First though let us see one more use of the <code class="language-shell highlighter-rouge">ssh-keygen</code> command. Remember that SHA1 fingerprint from earlier.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/999b1e82-eb1a-4107-9056-4a7add0c7326.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>So buy running <code class="language-shell highlighter-rouge">ssh-keygen <span class="nt">-l</span> <span class="nt">-v</span> <span class="nt">-f</span></code> and pointing it as either the public or private key we can confirm that the fingerprint show matches the one generated.</p><blockquote><p>MD5 is not recommended these days due to potential collisions however if you need to test fingerprints as MD5 you can use the following</p></blockquote><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>&amp;num<span class="p">;</span> get the MD5 <span class="k">for </span>private key
openssl pkey <span class="nt">-in</span> /path/to/privatekey <span class="nt">-pubout</span> <span class="nt">-outform</span> DER | openssl md5 <span class="nt">-c</span>

&amp;num<span class="p">;</span> get the MD5 <span class="k">for </span>public key
openssl pkey <span class="nt">-in</span> /path/to/publickey <span class="nt">-pubin</span> <span class="nt">-pubout</span> <span class="nt">-outform</span> DER | openssl md5 -
</pre></table></code></div></div><h2 id="copying-keys-to-another-server"><span class="mr-2">Copying Keys To Another Server</span><a href="#copying-keys-to-another-server" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>First I want to clarify some common mistakes. I know of other consultants who have thought they could use the following command to add the keys to another server.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/f16d3f8a-372b-49b3-8476-7ffd8458346f.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Okay there is a lot happening in this picture and I want to break some of it down.</p><p>Firstly I have changed directory to the root of the server <code class="language-shell highlighter-rouge"><span class="nb">cd</span> /</code> to show you do not need to be in the same folder as the keys to use this command. Secondly we can see the servers current fingerprint just like we did with the first server. Notice the server fingerprint is not the same and any fingerprints we have generated or seen so far. If we look further down we can see that the first time I had to manually authenticate to the sever and then we can see that the number of key(s) copied were “Number of key(s) added: 1”.</p><p>Let us have a look what is going on.</p><blockquote><p>Please note I have already SSH to the box so no fingerprint for me to accept in this screenshot.</p></blockquote><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/a2d5285c-008f-4c1e-83a0-adc00aead2d3.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Now let us examine the <code class="language-shell highlighter-rouge">.ssh</code> folder</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/6ead762c-7d59-4ac3-a5b3-25d423962665.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><ul><li>not keys have been copied across as the name in the command might suggest.<li>the public key on demo1 has been added into the <code class="language-shell highlighter-rouge">authorized_keys</code> on demo2 but the <code class="language-shell highlighter-rouge">id_rsa</code> private key and <code class="language-shell highlighter-rouge">id_rsa.pub</code> key were not transferred.<li>Once an SSH key has been created, the ssh-copy-id command can be used to install it as an authorized key on the server. Once the key has been authorized for SSH, it grants access to the server without a password. That’s its function.</ul><p>So know we have seen that the function of <code class="language-shell highlighter-rouge">ssh-copy-id</code> and how it does it job there should be little reason to worry about placing keys and authorized file entries into golden build images. You spin the server and then the admin (demo1) in this situation uses the <code class="language-shell highlighter-rouge">ssh-copy-id</code>.</p><h2 id="let-us-look-at-an-alternative-up-comes-box-3"><span class="mr-2">Let us look at an alternative, up comes box 3.</span><a href="#let-us-look-at-an-alternative-up-comes-box-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The admin has a new machine deployed on his network. For the sake of simplicity, we have called it “demo3”.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/a18fe094-7160-40da-9e2c-993576244135.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>With server 3 booted the admin on host “demo1” wants to be able to SSH into demo3. We know that the admins public key hosted on demo one needs to be placed inside the authorized keys of demo3.</p><p>Just for excitement as so you keep learning something new as you read. Let us not use the <code class="language-shell highlighter-rouge">ssh-copy-id</code> command.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">cat </span>id_rsa.pub | ssh root@95.179.138.81 <span class="s1">'cat &gt; ~/.ssh/authorized_keys'</span>
<span class="nb">cat</span> ~/.ssh/id_rsa.pub | ssh root@95.179.138.81 <span class="s1">'cat &gt;&gt; ~/.ssh/authorized_keys'</span>
</pre></table></code></div></div><p>Two things should be noted. This time we do need to be in the directory of the SSH Public key folder or we need to put in an explicit path as in example two. The aim here is to to <code class="language-shell highlighter-rouge"><span class="nb">cat</span></code> the public key and pipe it to the authorized keys.</p><p>We have two problems, however! 1) We don’t even know if this file exists yet which will result in an error. Secondly, it may be exist and have keys already in it that we don’t want to overwrite with a single “&gt;” symbol.</p><p>If we just want SSH to run a command and return we can list it as the end of the ssh command.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh root@95.179.138.81 <span class="s1">'ls -Rl ~/'</span>
</pre></table></code></div></div><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/a8a4d6bd-3365-468d-b8d0-1178fd662187.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>As we can see, the root folder is pretty empty and so out command would result in error unless we made a directory first. Now we have started this was we will continue but I just wanted to highligh some of the extra steps the <code class="language-shell highlighter-rouge">ssh-copy-id</code> command takes care of such as create the folders, files and getting the permissions right. However lets proceed.</p><p>Lets make the folder using the <code class="language-shell highlighter-rouge"><span class="nt">-p</span></code> that creates any directories needed along the way.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/2d66bf01-f47e-4ac8-9552-67f513418529.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Now lets copy the public key across.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/be001666-6d2a-43bf-b561-046d20dc6e66.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>So with the public key copied across, albeit a lot more work we should be in a position to SSH into that server without a password. It should be noted at this point we have a reasonably secure configuration with “demo1” being able to access “demo2” and “demo3”.</p><p>It should be noted that “demo3” could still connect back to “demo1” with a password. Not this might be behavior that is needed but if “demo1” is a jump box to other machines in the network we may want to harden “demo1” by adjust the config.</p><p>Password authentication defaults to “yes”, don’t want to lock yourself out of a box by accident now do we. Note, even though the field is not set and commented out it shows us the default behavior.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/9c72444d-3604-49fd-ab40-f57556edcce4.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Now before I change around with config and potentially lock myself out of my admin jump box “demo1” I need to remember two things. Firstly I need the private key to log in. This can be grabbed from the local system by using the <code class="language-shell highlighter-rouge">scp</code> command.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>scp root@demo1:/root/.ssh/<span class="k">*</span>
</pre></table></code></div></div><p>I will get asked for my password but I will have my precious keys. However I STILL wont be able to login. The more observant of you by this point should be screaming your authorized_key file is missing.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/9fe2c9c7-8921-47df-8464-4278e5a89ecc.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>We can run the <code class="language-shell highlighter-rouge">ssh-copy-id</code> on localhost but notice we still need to log in.</p><p>With that complete, we can edit the ssh configuration to stop password login from other boxes. This helps secure our jump box.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>nano /etc/ssh/sshd_config
</pre></table></code></div></div><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/05b0645f-745f-4bd9-8cd8-742a7c0ad99d.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Let us uncomment that line and change it to no. Now Demo2 and Demo3 could not ssh to us without a private key and even if they brute forced the correct password for the root user it would not let them connect.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/943e88e6-819d-4652-917b-76f171792883.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Lets restart the service and try it out.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>systemctl restart sshd
</pre></table></code></div></div><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/2f040ccb-60c0-4cf6-8790-af306cac9a7b.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>No prompt for a password and a message saying permission denied, something we have all seen on pentests.</p><h2 id="what-is-the-known-host"><span class="mr-2">What is the known host</span><a href="#what-is-the-known-host" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>When we press “yes” to accept the fingerprints of servers that we login to their corresponding entries get added to <code class="language-shell highlighter-rouge">known_hosts</code>. If a server fingerprint changes for any one of a number of reasons and it no longer matches what is in the known host we get a warning next time we try and connect to that server.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/fcfbb795-e111-4cb9-b473-2f2bb019eee4.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Lets force one now</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/4d5566f9-622a-4f29-b196-829a93e9cc3e.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>so despite connecting to that machine multiple times before we know have to once again accept the warning…..</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/d00b4621-de90-4a96-b46f-a37ba02fb13c.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>When administering a lot of servers from your jump box, pressing yes all the time could end up being quite annoying. Is there another way?</p><h1 id="enter-sshkey-scan">Enter <code class="language-shell highlighter-rouge">sshkey-scan</code></h1><p>So lets have a look at this useful tool. I will admit in out three machine setup it is overkill but it does let us look at the options a bit easier.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/243b3a86-cedc-48cc-ab8a-69a4423f7f1d.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>So what is going on here! First, we can see the format of the original known_host file (the one I modified with ‘l33t’).</p><p>I have then emptied out the known host file due to the fact we are about to fill it. Please note that the known_host file hasnt been filled yet as we still have to redirect out command back into the the file. Before we get that far lets have a look when we don’t give <code class="language-shell highlighter-rouge">ssh-keyscan</code> a format for the known host file. Each IP I gave it was submitted as ed25519, ssh-rsa, ecdsa, and ed25519. In addition it fingerprints the end server boxes for their IP, ports and their operating system version and leaves it as a comment before each entry. This makes this a rather useful tool.</p><p>If you have more than the few machines that I have here then you can supply them as a file with the <code class="language-shell highlighter-rouge"><span class="nt">-f</span></code> option.</p><blockquote><p>Note, make sure you include machines you trust and you know haven’t been compromised. Regenerating the known hosts will remote the warning telling you if a host has changed since you last approved it so double check.</p></blockquote><p>Lets create out known host file and check it out.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/7db3a1b7-9276-4a9e-8463-b824f30514b3.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>so let us run out command and see if we can login with no warning.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/b0417e4f-4dea-4e36-9391-709dbe3c562d.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Now before I finish part one of this article; I do appreciate you staying with me while we go through the some of the configuration of the process. I just want to show you one more thing for the lazy admin… like me!</p><h2 id="config"><span class="mr-2">Config</span><a href="#config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The local SSH Config can allow us to do some very complex things. We will only cover some of the really useful features here</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/bd5c27cf-637c-41d5-b31c-09f91b7537be.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>My “config” file for my jumpbox on demo1</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>Host demo2
        HostName 78.141.216.246
        User root

Host demo3
        HostName 95.179.138.81
        User root
</pre></table></code></div></div><p>Now with just <code class="language-shell highlighter-rouge">ssh demo2</code> it replaces <code class="language-shell highlighter-rouge">ssh root@78.141.216.246</code></p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/de62bb13-f3c3-4dcb-ab34-8a5935e1c437.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><h2 id="summary"><span class="mr-2">Summary</span><a href="#summary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In this first article, we looked at some of the SSH commands responsible for deployed Private Key Infrastructure with SSH. We look at a reasonable good practice with regards to making a jump box and got a general understanding of the difference between the config file, the known_hosts file, the authorized_keys and the public and private key.</p><p>In the second part of this article, we will expand on part one and go deeper into some of the configuration options and how they are often misconfigured to allow lateral movement, and complete network pwnage. I would however feel I miss-sold you on the title of the article if I didn’t show you one basic privilege escalation trick.</p><p>In the screenshot below the admin has backup his private key to a folder with the wrong permissions. Debbie has come along and found this key and has SSH into the host she is on. Debbie is now the <code class="language-shell highlighter-rouge">root</code> user and has a stable shell.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/8085e373-485d-4bb1-92b9-af14ef43901d.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>This trick was a little contrived but comes up frequently in capture the flag events.</p><figure class="figure text-center col-xs-12 col-sm-12 col-lg-12"> <img data-src="//static/7fe3301b-18a6-425a-9f7d-6a66770607df.png" class="img-fluid" alt="" data-proofer-ignore><figcaption class="figure-caption text-center fw-normal text-dark">System Preferences.</figcaption></figure><p>Try and wrap your head around the basics we talked about today. Next article we will look at SSH Server configuration in detail and the things that often go wrong, we will look at piping tools through SSH, creating tunnels, moving laterally and will talk a lot more about SSH fingerprinting and how it can help us increase the attack surface.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/article/'>article</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Linux+Priv+Escalation+and+Lateral+Movement+With+SSH+Keys+-+EvilSaint&url=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-priv-escalation-and-lateral-movement-ssh-keys%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Linux+Priv+Escalation+and+Lateral+Movement+With+SSH+Keys+-+EvilSaint&u=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-priv-escalation-and-lateral-movement-ssh-keys%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-priv-escalation-and-lateral-movement-ssh-keys%2F&text=Linux+Priv+Escalation+and+Lateral+Movement+With+SSH+Keys+-+EvilSaint" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-priv-escalation-and-lateral-movement-ssh-keys%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/windows-registry/">Windows Registry</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ssl/">ssl</a> <a class="post-tag" href="/tags/tls/">tls</a> <a class="post-tag" href="/tags/powershell/">powershell</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/enumeration/">enumeration</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/git-ssh-keys/"><div class="card-body"> <em class="small" data-ts="1618441200" data-df="ll" > Apr 15, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Git with SSH Keys</h3><div class="text-muted small"><p> When working with Git via command line, the easiest way to authenticate is with x.509 keys. This article will show you how to set them up. Introduction With GUI-based Git clients, such as GitHub ...</p></div></div></a></div><div class="card"> <a href="/posts/beginner-guide-apt-commands/"><div class="card-body"> <em class="small" data-ts="1619218800" data-df="ll" > Apr 24, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Beginner Guide To APT Commands</h3><div class="text-muted small"><p> Little history of how apt works? What are sources? Updating sources? Searching for packages Show information about the package Finding packages installed on your machine Finding packages that...</p></div></div></a></div><div class="card"> <a href="/posts/many-hats-pentester/"><div class="card-body"> <em class="small" data-ts="1619218800" data-df="ll" > Apr 24, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>The Many Hats Of A Pentester</h3><div class="text-muted small"><p> Hat One - Technical Hat Two - Be able to write well Hat Three - Present to a diverse audience</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/many-hats-pentester/" class="btn btn-outline-primary" prompt="Older"><p>The Many Hats Of A Pentester</p></a> <a href="//posts/penetrate-report-repeat/" class="btn btn-outline-primary" prompt="Newer"><p>Penetrate. Report. Repeat</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "TheEvilSaint/theevilsaint.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk", "data-category": "Comments", "data-category-id": "DIC_kwDODy-1C84CSN7z", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ssl/">ssl</a> <a class="post-tag" href="/tags/tls/">tls</a> <a class="post-tag" href="/tags/powershell/">powershell</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/enumeration/">enumeration</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://www.twitter.com/_evilsaint_/">evilsaint</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available!</p><button type="button" class="btn btn-primary" aria-label="Update"> Update 🚀 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-KK5XXRT4LD"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KK5XXRT4LD'); }); </script>
