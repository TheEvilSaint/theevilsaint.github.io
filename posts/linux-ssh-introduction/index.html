<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.1" /><meta property="og:title" content="Linux Security :- Secure Shell (SSH) Introduction" /><meta property="og:locale" content="en" /><meta name="description" content="This article serves as an introduction to the Secure Shell (SSH) protocol for Linux users. When you need to connect to Linux servers remotely, SSH is the most commonly used method. SSH provides a text interface by spawning a remote shell. All commands entered in your local terminal are sent to the remote server and executed there." /><meta property="og:description" content="This article serves as an introduction to the Secure Shell (SSH) protocol for Linux users. When you need to connect to Linux servers remotely, SSH is the most commonly used method. SSH provides a text interface by spawning a remote shell. All commands entered in your local terminal are sent to the remote server and executed there." /><link rel="canonical" href="http://theevilsaint.github.io/posts/linux-ssh-introduction/" /><meta property="og:url" content="http://theevilsaint.github.io/posts/linux-ssh-introduction/" /><meta property="og:site_name" content="EvilSaint" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-27T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Linux Security :- Secure Shell (SSH) Introduction" /><meta name="twitter:site" content="@_evilsaint_" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-01-27T00:00:00+00:00","datePublished":"2022-01-27T00:00:00+00:00","description":"This article serves as an introduction to the Secure Shell (SSH) protocol for Linux users. When you need to connect to Linux servers remotely, SSH is the most commonly used method. SSH provides a text interface by spawning a remote shell. All commands entered in your local terminal are sent to the remote server and executed there.","headline":"Linux Security :- Secure Shell (SSH) Introduction","mainEntityOfPage":{"@type":"WebPage","@id":"http://theevilsaint.github.io/posts/linux-ssh-introduction/"},"url":"http://theevilsaint.github.io/posts/linux-ssh-introduction/"}</script><title>Linux Security :- Secure Shell (SSH) Introduction | EvilSaint</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="EvilSaint"><meta name="application-name" content="EvilSaint"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://evilsaint.com/static/images/evilsaint_shield_logo.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">EvilSaint</a></div><div class="site-subtitle font-italic">I void warranties</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://twitter.com/_evilsaint_" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="https://evilsaint.com/subscribe" aria-label="youtube" target="_blank" rel="noopener"> <i class="fab fa-youtube"></i> </a> <a href="https://github.com/TheEvilSaint" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.instagram.com/therealevilsaint/" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href="https://www.facebook.com/TheEvilSaint/" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Linux Security :- Secure Shell (SSH) Introduction</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Linux Security :- Secure Shell (SSH) Introduction</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1643241600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jan 27, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.twitter.com/_evilsaint_/">evilsaint</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1644 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><p>###What is SSH?</p><p>SSH, or Secure Shell, is a ‚Äútried and tested‚Äù protocol that has been in use since 1995. The SSH protocol allows remote servers to be controlled and modified securely, even over insecure networks. This is accomplished through a text interface, which accepts input from your local terminal and sends it to the remote server for execution; All the while providing encryption for the communication exchanged.</p><p>###SSH enumeration with Linux</p><p>Obtaining information from running services is used by penetration testers during the enumeration phase of an engagement to gain insight into the target(s) under review. We can ascertain the following from the SSH protocol:</p><ul><li>SSH package version - You might be able to find the operating system and version.<li>SSH key fingerprint - Has the key been re-used somewhere (Another machine? Same machine, just another port/service?).<li>SSH banner - Any text (if at all) before the password prompt (often get legal warnings about connecting to it).</ul><p>Let us look into acquiring this information with our Linux-based machine.</p><h4 id="server-version"><span class="mr-2">Server version</span><a href="#server-version" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>SSH operates on a client-server architecture. In this architecture, the host being accessed acts as an SSH server, while the host connecting the server acts as an SSH client. Both these utilise the SSH protocol with the help of software; The most common of which is the OpenSSH package for Linux-based systems.</p><p>To find out the SSH server software and its version in use, we can use netcat.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>nc 10.0.0.1 22

SSH-2.0-OpenSSH_8.4p1 Debian-6
</pre></table></code></div></div><h4 id="fingerprinting"><span class="mr-2">Fingerprinting</span><a href="#fingerprinting" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>SSH keys provide access without the need for passwords. They consist of public and private key pairs, which act as means to encrypt and decipher data exchanged.</p><p>Public keys can also be used to verify the identity of the offering party. A hash obtained from the public key, is also known as fingerprint. SSH servers display their fingerprints to users when they first connect to the server, or the public key of the server has changed since the last time a connection was initiated.</p><p>To obtain the fingerprint of a server, you can use the SSH client on Linux.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>root@kali:~# ssh root@10.11.1.71  


The authenticity of host <span class="s1">'10.11.1.71 (10.11.1.71)'</span> can<span class="s1">'t be established.  
ECDSA key fingerprint is SHA256:AibCWx1KvdJmNHd3KVsYksWtveJPdLZAsHMIChsTeHE.  
Are you sure you want to continue connecting (yes/no)?  
</span></pre></table></code></div></div><h4 id="ssh-banner"><span class="mr-2">SSH Banner</span><a href="#ssh-banner" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Before allowing authentication, the SSH server can display a pre-configured message to its users. If an SSH banner is configured, you can see it while fingerprinting the server as described above.</p><h4 id="nmap"><span class="mr-2">Nmap</span><a href="#nmap" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Nmap is a network mapping tool that is an essential part of every penetration tester‚Äôs arsenal. The installation comes with Nmap Scripting Engine (NSE), which allows users to write and share network enumeration scripts. These scripts are most typically located at /usr/share/nmap on Linux machines.</p><p>To view which SSH scripts are available with your version of nmap, use <code class="language-shell highlighter-rouge"><span class="nb">ls</span></code> .</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>bash  
root@root:~/# <span class="nb">ls</span> <span class="nt">-ls</span> /usr/share/nmap/scripts/<span class="k">*</span>ssh<span class="k">*</span>
8 <span class="nt">-rw-r--r--</span> 1 root root 5659 Sep 2 2016 /usr/share/nmap/scripts/ssh2-enum-algos.nse  
16 <span class="nt">-rw-r--r--</span> 1 root root 15363 Sep 2 2016 /usr/share/nmap/scripts/ssh-hostkey.nse  
4 <span class="nt">-rw-r--r--</span> 1 root root 1446 Sep 2 2016 /usr/share/nmap/scripts/sshv1.nse<span class="sb">`</span>  
</pre></table></code></div></div><p>The nmap host key script allows fingerprinting and banner grabbing across the network.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>nmap 192.168.1.0/24 <span class="nt">-p</span> 22 <span class="nt">-sV</span> <span class="nt">--script</span><span class="o">=</span>ssh-hostkey  

<span class="o">[</span>...]
| ssh-hostkey: Possible duplicate hosts
| Key 1024 60:ac:4d:51:b1:cd:85:09:12:16:92:76:1d:5d:27:6e <span class="o">(</span>DSA<span class="o">)</span> used by:
|   192.168.1.1
|   192.168.1.2
| Key 2048 2c:22:75:60:4b:c3:3b:18:a2:97:2c:96:7e:28:dc:dd <span class="o">(</span>RSA<span class="o">)</span> used by:
|   192.168.1.1
|_  192.168.1.2
</pre></table></code></div></div><h4 id="hydra"><span class="mr-2">Hydra</span><a href="#hydra" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>SSH servers can be configured to support password authentication. This means that upon connecting, a username and password are required for the user to log in. Unlike key-based authentication, password authentication exposes the server brute force password attacks.</p><p>Hydra is a tool for performing brute force attacks on SSH. These attacks can be set to use a word list, a password list, or a host list.</p><p>Several hosts with a username and a password list:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>hydra <span class="nt">-L</span> /usr/share/ncrack/default.usr  <span class="nt">-P</span> /usr/share/wordlists/rockyou.txt <span class="nt">-M</span> hosts.txt ssh
</pre></table></code></div></div><p>One host with a password list against a single user (‚Äúroot‚Äù):</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>hydra <span class="nt">-l</span> root <span class="nt">-P</span> /usr/share/wordlists/rockyou.txt 10.1.1.1 ssh
</pre></table></code></div></div><p>Hydra flags:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nt">-M</span> <span class="o">=</span> <span class="o">(</span>FILE<span class="o">)</span> server list <span class="k">for </span>parallel attacks, one entry per line  
<span class="nt">-e</span> nsr <span class="o">=</span> <span class="s2">"n"</span> null password, <span class="s2">"s"</span> try login as pass, <span class="s2">"r"</span> try pass as login  
<span class="nt">-s</span> <span class="o">=</span> <span class="o">(</span>PORT<span class="o">)</span> <span class="k">if </span>the service is on a different default port, define it here  
<span class="nt">-l</span> or <span class="nt">-L</span> <span class="o">=</span> single username login or username from FILE  
<span class="nt">-p</span> or <span class="nt">-P</span> <span class="o">=</span> single password login or password from FILE  
</pre></table></code></div></div><h4 id="word-lists"><span class="mr-2">Word lists</span><a href="#word-lists" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The success rate of a brute force attack is only as high as the quality of the word list used. Word lists should be chosen with the basis of information gathered within the enumeration phase. For example, attacking the ‚Äúroot‚Äù username on a Windows-based SSH server is less likely to grant access than attacking it on a Linux-based SSH server.</p><p>Multi-purpose username lists:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>/usr/share/ncrack/default.usr  

/usr/share/metasploit-framework/data/wordlists/default_users_for_services_unhash.txt  
</pre></table></code></div></div><p>The most 14344392 popular passwords from a breached password database collection:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>/usr/share/wordlists/rockyou.txt  
</pre></table></code></div></div><h3 id="about-ssh-keys"><span class="mr-2">About SSH keys</span><a href="#about-ssh-keys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>SSH keys are a more secure way of logging into a server with SSH than a password alone. As we have uncovered earlier, a brute force attack can eventually crack a password; However, it is nearly impossible to decipher SSH keys with brute force alone.</p><p>When generating a key pair, you will end up with two long strings of characters: a public and a private key. You can put the public key on any server and then unlock it by connecting with a client that has the private key. When the two match, the system unlocks without requiring a password. You can boost security even further by encrypting the private key with a password.</p><h4 id="how-to-set-up-ssh-keys"><span class="mr-2">How to set up SSH keys</span><a href="#how-to-set-up-ssh-keys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2">https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2</a></p><p>In case of key-based authentication, the SSH connection requires two key pairs:</p><ul><li>Your client software compares the server‚Äôs (host) public key to data encrypted with the host private key. This necessitates having a copy of the server‚Äôs public key, which you are given at the first connection and which your client stores if you approve of it.<li>The server verifies your authentication data, which is encrypted with your user private key, using a copy of your user public key that it has because you placed it there (or had someone put there for you).</ul><h4 id="step-one---create-the-rsa-key-pair"><span class="mr-2">Step One - Create the RSA key pair</span><a href="#step-one---create-the-rsa-key-pair" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The first step is to create the key pair on the client machine (which is likely just your computer):</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> rsa  
</pre></table></code></div></div><h4 id="step-two---store-the-keys-and-passphrase"><span class="mr-2">Step Two - Store the keys and passphrase</span><a href="#step-two---store-the-keys-and-passphrase" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Once you have entered the Gen Key command, you will get a few more questions:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Enter file <span class="k">in </span>which to save the key <span class="o">(</span>/home/demo/.ssh/id_rsa<span class="o">)</span>:  
</pre></table></code></div></div><p>You can press enter here, saving the file to the user‚Äôs home (in this case, my example user is called demo).</p><p>Next, you will be prompted for a passphrase.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>:  
</pre></table></code></div></div><p>It is entirely up to you whether or not to use a passphrase. Entering a passphrase has advantages: the security of a key, no matter how encrypted, is still dependent on the fact that it is not visible to others. If an unauthorised user obtains a pass-protected private key, they will be unable to log in to the accounts associated with it until they figure out the passphrase, buying the hacked user some time. The only disadvantage of having a passphrase is having to type it in each time you use the key pair.</p><p>The entire key generation process looks like this:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>ssh-keygen <span class="nt">-t</span> rsa  
Generating public/private rsa key pair.  
Enter file <span class="k">in </span>which to save the key <span class="o">(</span>/home/demo/.ssh/id_rsa<span class="o">)</span>:  
Enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>:  
Enter same passphrase again:  
Your identification has been saved <span class="k">in</span> /home/demo/.ssh/id_rsa.  
Your public key has been saved <span class="k">in</span> /home/demo/.ssh/id_rsa.pub.  
The key fingerprint is:  
4a:dd:0a:c6:35:4e:3f:ed:27:38:8c:74:44:4d:93:67 demo@a  
The key<span class="s1">'s randomart image is:  
+--[ RSA 2048]----+  
| .oo. |  
| . o.E |  
| + . o |  
| . = = . |  
| = S = . |  
| o + = + |  
| . o + o . |  
| . o |  
| |  
+-----------------+  
  
The public key is now located in /home/demo/.ssh/id_rsa.pub The private key (identification) is now located in /home/demo/.ssh/id_rsa  
</span></pre></table></code></div></div><h4 id="step-three---copy-the-public-key"><span class="mr-2">Step Three - Copy the public key</span><a href="#step-three---copy-the-public-key" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Once the key pair has been generated, the public key should be placed on the server that we intend to use.</p><p>Using the ssh-copy-id command, you can copy the public key into the new machine‚Äôs authorized_keys file. Replace the example username and IP address below with your own.</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh-copy-id user@10.1.1.1
</pre></table></code></div></div><p>Alternatively, you can paste in the keys using SSH:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cat</span> ~/.ssh/id_rsa.pub | ssh user@10.1.1.1 <span class="s2">"mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys"</span>  
</pre></table></code></div></div><p>No matter which command you use, you should see something like this:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>The authenticity of host <span class="s1">'10.1.1.1 (10.1.1.1)'</span> can<span class="s1">'t be established.  
RSA key fingerprint is b1:2d:33:67:ce:35:4d:5f:f3:a8:cd:c0:c4:48:86:12.  
Are you sure you want to continue connecting (yes/no)? yes  
Warning: Permanently added '</span>10.1.1.1<span class="s1">' (RSA) to the list of known hosts.  
user@12.34.56.78'</span>s password:  
</pre></table></code></div></div><p>You can now log in to user@10.1.1.1 without being prompted for a password. However, if you set a password, you will be prompted to enter it at that time (and every time you log in in the future).</p><h4 id="optional-step-four--disable-the-password-for-root-login"><span class="mr-2">Optional Step Four -Disable the password for root login</span><a href="#optional-step-four--disable-the-password-for-root-login" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Once you have copied your public key to the server and confirmed that you can log in using just the SSH keys, you can restrict root login to SSH keys only.</p><p>To do this, open the SSH configuration file:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/ssh/sshd_config  
</pre></table></code></div></div><p>Find the line that includes PermitRootLogin and change it to ensure that users can only connect using their SSH key:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>PermitRootLogin without-password  
</pre></table></code></div></div><p>Put the changes into action:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>reload ssh
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/article/'>article</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="//tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="//tags/ssh/" class="post-tag no-text-decoration" >ssh</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Linux+Security+%3A-+Secure+Shell+%28SSH%29+Introduction+-+EvilSaint&url=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-ssh-introduction%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Linux+Security+%3A-+Secure+Shell+%28SSH%29+Introduction+-+EvilSaint&u=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-ssh-introduction%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-ssh-introduction%2F&text=Linux+Security+%3A-+Secure+Shell+%28SSH%29+Introduction+-+EvilSaint" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=http%3A%2F%2Ftheevilsaint.github.io%2Fposts%2Flinux-ssh-introduction%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/windows-registry/">Windows Registry</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ssl/">ssl</a> <a class="post-tag" href="/tags/tls/">tls</a> <a class="post-tag" href="/tags/powershell/">powershell</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/enumeration/">enumeration</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/linux-file-formatting/"><div class="card-body"> <em class="small" data-ts="1629241200" data-df="ll" > Aug 18, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux File Formatting</h3><div class="text-muted small"><p> tabs to spaces (by default without the t it is 8 spaces) expand -t 4 &amp;lt;file&amp;gt; &amp;gt; &amp;lt;new_file&amp;gt; Leading tabs only we add the i option https://linuxhandbook.com/convert-tabs-spaces/</p></div></div></a></div><div class="card"> <a href="/posts/installing-gui-linux/"><div class="card-body"> <em class="small" data-ts="1651014000" data-df="ll" > Apr 27, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Installing A GUI On Linux</h3><div class="text-muted small"><p> Installing a GUI on Debian or Centos On Debian First, update your system. 1 apt-get update Select your choice of package and install 1 2 3 4 5 6 7 apt-get install &amp;lt;package name&amp;gt; # i.e. ap...</p></div></div></a></div><div class="card"> <a href="/posts/linux-nano-shortcuts/"><div class="card-body"> <em class="small" data-ts="1651446000" data-df="ll" > May 2, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux: Nano Shortcuts</h3><div class="text-muted small"><p> Nano Files Read file 1 Ctrl-R Save file 1 Ctrl-O Close file 1 Ctrl-X Cut and Paste Start marking text 1 ALT-A Cut marked text or line. 1 CTRL-K Paste text 1 CTRL-U Navigate Fil...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/vulnerabilities-ssl-tls-overview/" class="btn btn-outline-primary" prompt="Older"><p>Vulnerabilities in SSL & TLS :- Overview</p></a> <a href="//posts/protocol-dissection-netbios-smb/" class="btn btn-outline-primary" prompt="Newer"><p>Protocol Dissection :- NetBIOS & SMB</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "TheEvilSaint/theevilsaint.github.io", "data-repo-id": "MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk", "data-category": "Comments", "data-category-id": "DIC_kwDODy-1C84CSN7z", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/ssl/">ssl</a> <a class="post-tag" href="/tags/tls/">tls</a> <a class="post-tag" href="/tags/powershell/">powershell</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/enumeration/">enumeration</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloud/">cloud</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> ¬© 2023 <a href="https://www.twitter.com/_evilsaint_/">evilsaint</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available!</p><button type="button" class="btn btn-primary" aria-label="Update"> Update üöÄ </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-KK5XXRT4LD"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KK5XXRT4LD'); }); </script>
